<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="SemiColonWeb" />
	<!-- Stylesheets	============================================= -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />
	<link rel="stylesheet" href="../style.css" type="text/css" />
	<link rel="stylesheet" href="../css/dark.css" type="text/css" />
	<link rel="stylesheet" href="../css/font-icons.css" type="text/css" />
	<link rel="stylesheet" href="../css/animate.css" type="text/css" />
	<link rel="stylesheet" href="../css/magnific-popup.css" type="text/css" />
	<link rel="icon" href="../images/favicon.png" sizes="32x32" type="image/png">
	<link rel="stylesheet" href="../css/responsive.css" type="text/css" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!-- Document Title	============================================= -->
	<title>uCollateral Smart-Contract - 1 Month</title>
</head>

<body class="stretched" onload="updateDapp()">
	<!-- Document Wrapper	============================================= -->
	<div id="wrapper" class="clearfix">
		<!-- Header 	============================================= -->
		<header id="header" class="sticky-style-2">
			<div class="container clearfix">
				<!-- Logo	============================================= -->
				<div id="logo">
	        <a href="https://ucollateral.com" class="standard-logo" data-dark-logo="../images/logo-dark.png"><img src="../images/logo.png" alt="uCollateral Smart-Contract"></a>
	        <a href="https://ucollateral.com" class="retina-logo" data-dark-logo="../images/logo-dark@2x.png"><img src="../images/logo@2x.png" alt="uCollateral Smart-Contract"></a>
				</div>
				<!-- #logo end -->
				<ul class="header-extras">
					<li>
						<i class="i-medium i-circled i-bordered icon-calculator nomargin"></i>
						<div class="he-text">
							Calculate
							<span style="font-size:10px">Bounty Reward</span>
						</div>
					</li>
					<li>
						<i class="i-medium i-circled i-bordered icon-download nomargin"></i>
						<div class="he-text">
							Deposit
							<span style="font-size:10px">UCASH Collateral</span>
						</div>
					</li>
					<li>
						<i class="i-medium i-circled i-bordered icon-undo nomargin"></i>
						<div class="he-text">
							Reclaim
							<span style="font-size:10px">Collateral / Bounty</span>
						</div>
					</li>
				</ul>
			</div>
			<div id="header-wrap" style="background-color:#f8f8f8;padding:15px">
			<!-- Primary Navigation	============================================= -->
				<nav id="primary-menu" class="style-2">
					<div class="container clearfix">
						<div id="primary-menu-trigger">
							<i class="icon-th icon-2x"></i>
						</div>
						<ul style="font-size:12px">
							<div id="TopLeftMetamaskLoggedIn">
								<span id="YourAddress"></span><BR>
								<span id="OwnedUCASH"></span>
							</div>
							<div id="TopLeftMetamaskLoggedOut">
								<span id="UCASHAddressLabel"></span><br>
		            <span id="ContractAddressLabel"></span>
							</div>
						</ul>
						<!-- Top Search	============================================= -->
						<div style="float:left">
							<input type="text" style="padding: 10px;font-size:8px;padding-right:133px" id="search-my-address" value="" placeholder="Search Address Data">
						</div>
						<!-- #top-search end -->
					</div>
				</nav>
				<!-- #primary-menu end -->
			</div>
		</header>
		<!-- #header end -->
		<div class="clear"></div>
		<!-- Content ============================================= -->
		<section id="content">
      <center>
				<div class="content-wrap nopadding">
	        <script src="https://cdn.ethers.io/scripts/ethers-v4.min.js"></script>
	        <script src="../js/switchMetamask.js"></script>
	        <script src="../js/contractInit.js"></script>
	        <script src="../js/contractFunctions.js"></script>
	        <script>
					var _ethers = ethers;
				 var noWeb3 = false;
				 var currentProvider;

	try{
					 var provider = new ethers.providers.Web3Provider(web3.currentProvider,'mainnet');
					 currentProvider = web3.currentProvider;
							provider.listAccounts().then(function(accounts) {

							 initialize(_ethers, accounts,"0x263E074415Dbf00DadFd23501C503D71Be70540B");
							 console.log(provider.isMetaMask)
							});
		 } catch{
					 var provider = new _ethers.getDefaultProvider('homestead');
					 initializeNoMetamask(_ethers,"0x263E074415Dbf00DadFd23501C503D71Be70540B");
					 noWeb3 = true;
		 }
	        </script>
	        <script charset="utf-8" src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js" type="text/javascript">
            //MODULES:
            //All
            //LoanCalculator
            //ContractInfo
            //AddressAndBalance
            //LoanInfo
            //No Metamask
            //WatchAddress
            //Metamask Logged in
            //SendUCASH
            //ReclaimButton
            //ApproveAndTransfer
            //metamaskLoggedOut
            //connectToMetamask
            //Split into 3 divs
            //show/hide divs based on metamask status
            // put code into js files
            //test
            //push to github
	        </script>
	        <script>
            var counter = 0;
            window.setInterval("refreshDiv()", 2000);
            function refreshDiv(){
              updateDapp();
            }
	        </script>

<<<<<<< HEAD

						        <div id="noMetamask" style="padding:15px">
											<script>console.log("Metamask is Not Installed");</script>
											<h4><B>Please install Metamask to access advanced capabilities with the uCollateral contract.</b></h4>
						        </div>

										<div id="metamaskLoggedOut" style="padding:15px">
											<script>console.log("Metamask is Logged Out");</script>
											<label id="connectToMetamask"></label>
											<h4><B>Please login to Metamask to access advanced capabilities with the uCollateral contract.</b></h4>
										</div>


										<div id="ALL">
											<script>console.log("This Section for Everything");</script>
											<div style="background-color:#f8f8f8;padding:15px">
												<h2><B>1 Month Contract Information</b></h2>
												<B>Total Bounty Pool Available:</B><BR>
												<label id="BountyPool"></label><br>
												<B>The Collateral Contract has:</B><BR>
												<label id="ContractBalance"></label><br>
												<B>Total amount allocated to collateral providers:</B><BR>
												<label id="TotalUCASHAllocated"></label><br>
												<B>Total amount that can be reclaimed right now by all collateral providers:</B><BR>
												<label id ="TotalifClaimedNow"></label><br>
												<B>Total amount of loans active:</B><BR>
												<label id ="numLoans"></label><br>
											</div>
											<div style="padding:15px">
												<h2><B>Collateral Bounty Calculator</b></h2>
						            <input type="number" size="21" style="padding: 11px;" id="calculateAmountInput"/>&nbsp;<button class="button buttton-success button-large" onclick="Calculate()">Calculate</button><br>
						            <label id="UCASHtoReceive">Input amount of UCASH to contribute to get a bounty quote.</label><br>
											</div>
										</div>

					<div id="metamaskLoggedIn">
=======

						        <div id="noMetamask" style="padding:15px">
											<script>console.log("Metamask is Not Installed");</script>
											<h3><B>Please install Metamask to access advanced capabilities with the uCollateral contract.</b></h3>
						        </div>

										<div id="metamaskLoggedOut" style="padding:15px">
											<script>console.log("Metamask is Logged Out");</script>
											<label id="connectToMetamask"></label>
											<h3><B>Please login to Metamask to access advanced capabilities with the uCollateral contract.</b></h3>
										</div>


	        <div id="ALL">
						<script>console.log("This Section for Everything");</script>
						<div style="padding:15px">
							<h2><B>1 Month Contract Information</b></h2>
							<label id="BountyPool"></label><br>
							<label id="ContractBalance"></label><br>
							<label id="TotalUCASHAllocated"></label><br>
							<label id ="TotalifClaimedNow"></label><br>
							<label id ="numLoans"></label><br>
						</div>
						<div style="background-color:#f8f8f8;padding:15px">
							<h2><B>Collateral Bounty Calculator</b></h2>
	            <input type="number" size="21" style="padding: 11px;" id="calculateAmountInput"/>&nbsp;<button class="button buttton-success button-large" onclick="Calculate()">Calculate</button><br>
	            <label id="UCASHtoReceive">Input amount of UCASH to contribute to get a bounty quote.</label><br>
						</div>
					</div>

	        <div id="metamaskLoggedIn">
>>>>>>> 05130e09c5a5185c1b88350722f9c306a84e49ec
						<script>console.log("Metamask is Logged In");</script>
						<div style="background-color:#f8f8f8;padding:15px">
							<label id="contractTerm"></label><br>
							<label id="amountDeposited"></label><br>
		          <label id="totalReward"></label><br>
		          <label id="ifClaimedNow"></label><br>
		          <label id="timeLeft"></label><br>
		          <label id="lateBy"></label><br>
						</div>
						 <div style="padding:15px">
							<h2 style="margin-bottom:0px;"><B>Deposit with Metamask</b></h2>
								 (No Oracle)<BR><BR>
							<h3 style="margin-bottom:0px;">Step 1: Approve</h3>
		          <input type="number" size="21" style="padding: 11px;" id="AmountofUCASH" value="Amount of UCASH"/>
		          <button onclick="approve()" class="button buttton-success button-large">Approve Transfer</button><BR>
		          <label id="approvedAmount"></label><br>
							<h3 style="margin-bottom:0px;">Step 2: Contribute</h3>
		          <button onclick="metamaskContribute()" class="button buttton-success button-large">Deposit UCASH</button><br><br>
						</div>
						<div style="background-color:#f8f8f8;padding:15px">
							<h2 style="margin-bottom:0px;"><B>Deposit with Metamask</b></h2>
									 (Uses Oracle)<BR><BR>
							<input type="number" size="21" style="padding: 11px;" id="AmountofUCASH2" value="Amount of UCASH"/>
							<button onclick="contribute()" id="contributeButton" class="button buttton-success button-large">Deposit UCASH</button><br>
						</div>
						<div style="padding:15px">
							<h2 style="margin-bottom:0px;"><B>Reclaim with Metamask</b></h2>
									 (No Oracle)<BR><BR>
	            <button onclick="reclaim()" id="ReclaimButton" class="button buttton-success button-large">Reclaim</button><br><BR><BR>
						</div>
					</div>

					<div id="metamaskLoggedOut">
						<script>console.log("Metamask is Logged Out");</script>
						<div style="background-color:#f8f8f8;padding:15px">
							<h2 style="margin-bottom:0px;"><B>Deposit Directly</b></h2>
								 (Uses Oracle)<BR><BR>
									 <label>Send UCASH directly to the contract address using the details below:</label><BR>
									 <B>1 Month Term Contract Address</b><BR>
							<span id="ContractAddressLabel2"></span><BR><BR>
							<img id="x" src="../Ethereum_QR_code.png"height="164"><br><br>
						</div>
						<div style="padding:15px">
						 	<h2 style="margin-bottom:0px;"><B>Reclaim Directly</b></h2>
								 (Uses Oracle)
								 <BR><BR>
							<label>From the address you initially deposited your collateral, send 0.0011 UCASH or 110000 wei to the contract address:</label><BR>
								<B>1 Month Term Contract Address</b><BR>
							<span id="ContractAddressLabel3"></span><BR><BR>
							<img id="x" src="../Ethereum_QR_code.png"height="164"><br><BR>
						</div>
					</div>

	        <script>
					async function updateDapp(){
					 updateContractInfo();
					 let watchaddress = document.getElementById("search-my-address").value;
					 var _address;

					 switchMetamask(provider,currentProvider);
						 if (noWeb3){
							 ucashContract = new ethers.Contract(ucashContractAddress, ucashABI, provider);
							 uCollateralContract = new ethers.Contract(uCollateralContractAddress,uCollateralABI,provider);
						 }else{

							let accounts = await provider.listAccounts()

									signer = provider.getSigner(accounts[0]);

									if(signer._address>0){

											_address = signer._address;
											console.log(_address);
											ucashContract = new ethers.Contract(ucashContractAddress, ucashABI, signer);
											uCollateralContract = new ethers.Contract(uCollateralContractAddress,uCollateralABI,signer);
									}else{
											ucashContract = new ethers.Contract(ucashContractAddress, ucashABI, provider);
											uCollateralContract = new ethers.Contract(uCollateralContractAddress,uCollateralABI,provider);
								 };


					 }

					 if (watchaddress!=""){
						 _address = watchaddress;
					 }
					if(_address!=undefined){
							 getOwnedUCASHSimple(_address);
							 updateLoanInfo(_address);

							 document.getElementById("UCASHAddressLabel").innerHTML = "";
							 document.getElementById("ContractAddressLabel").innerHTML = "";
							 document.getElementById("YourAddress").innerHTML = "<B>Address: </b><a href='https://etherscan.io/address/"+_address+"'>" +_address+ "</a>";

						 } else {
							 document.getElementById("YourAddress").innerHTML = "";
							 document.getElementById("UCASHAddressLabel").innerHTML = "<B>UCASH Address: </b><a href='https://etherscan.io/address/"+ucashContractAddress+"'>" +ucashContractAddress+ "</a>";
							 document.getElementById("ContractAddressLabel").innerHTML = "<B>uCollateral Contract: </b><a href='https://etherscan.io/address/"+uCollateralContractAddress+"'>" +uCollateralContractAddress+ "</a>";
						 }

						 document.getElementById("ContractAddressLabel2").innerHTML = "<a href='https://etherscan.io/address/"+uCollateralContractAddress+"'>" +uCollateralContractAddress+ "</a>";
						 document.getElementById("ContractAddressLabel3").innerHTML = "<a href='https://etherscan.io/address/"+uCollateralContractAddress+"'>" +uCollateralContractAddress+ "</a>";

					}
	      	</script>
				</div>
	    </center>
		</section>
		<!-- #content end -->
		<!-- Footer ============================================= -->
		<footer id="footer" class="light">
			<!-- Copyrights ============================================= -->
			<div id="copyrights">
				<div class="container clearfix">
					<center>
						<img src="../images/footer-logo.png" alt="" class="footer-logo">
						<div class="footerlicense">
							© A <a href="https://ucash.network"><B>U.CASH Network</B></a> Initiative - 2018. Released under the <a href="https://opensource.org/licenses/mit-license.php" target="_blank">MIT license</a>
						</div>
					</center>
				</div>
			</div>
			<!-- #copyrights end -->
		</footer>
		<!-- #footer end -->
	</div>
	<!-- #wrapper end -->
	<!-- Go To Top ============================================= -->
	<div id="gotoTop" class="icon-angle-up"></div>
	<!-- External JavaScripts	============================================= -->
	<script type="text/javascript" src="../js/jquery.js"></script>
	<script type="text/javascript" src="../js/plugins.js"></script>
	<!-- Footer Scripts ============================================= -->
	<script type="text/javascript" src="../js/functions.js"></script>
</body>
</html>
